"use strict";(self.webpackChunklist_manager=self.webpackChunklist_manager||[]).push([[894],{5894:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var s=function(e){return e.todolists},l=function(e){return function(t){return"loading"===t.todolists.find((function(t){return t.id===e})).entityStatus}},n=i(9614),a=function(e){return e.tasks},r=i(5956),d=i(5464),o=i(4294),c=i(2791),u=i(184),m=function(e){var t=e.todolist,i=(0,d.o)(n.eX).changeTodolistFilter,s=function(e){return function(){i({id:t.id,filter:e})}},l="all"===t.filter?"primary":"inherit",a="active"===t.filter?"error":"inherit",r="completed"===t.filter?"success":"inherit";return(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)(o.Z,{variant:"contained",size:"small",onClick:s("all"),color:l,children:"All"}),(0,u.jsx)(o.Z,{variant:"contained",size:"small",onClick:s("active"),color:a,children:"Active"}),(0,u.jsx)(o.Z,{variant:"contained",size:"small",onClick:s("completed"),color:r,children:"Completed"})]})},h=i(3671),p=i(5397),f=i(3400),x=i(9434),v=function(e){var t=e.todolist,i=(0,d.o)(n.$f),s=i.removeTodolist,a=i.changeTodolistTitle,r=(0,x.v9)(l(t.id));return(0,u.jsxs)("h3",{className:"list-title",children:[(0,u.jsx)(h.m1,{value:t.title,onChange:function(e){return a({id:t.id,title:e}).unwrap()},disabled:r}),(0,u.jsx)(f.Z,{onClick:function(){s(t.id)},disabled:"loading"===t.entityStatus,children:(0,u.jsx)(p.Z,{})})]})},j=i(5527),k=(0,c.memo)((function(e){var t=e.todolist,i=(0,x.v9)(a)[t.id],s=(0,d.o)(r.KM).addTask,l=(0,c.useCallback)((function(e){return s({title:e,todolistId:t.id}).unwrap()}),[]),n="loading"===t.entityStatus;return(0,u.jsx)("div",{children:(0,u.jsxs)(j.Z,{elevation:2,style:{padding:"1.5rem 1rem"},children:[(0,u.jsx)(v,{todolist:t}),(0,u.jsx)(h.BZ,{addItem:l,disabled:n,placeholder:"Enter task title",className:"padding-block"}),(0,u.jsx)($,{todolist:t,tasks:i}),(0,u.jsx)("div",{style:{paddingTop:"10px"},children:(0,u.jsx)(m,{todolist:t})})]})})})),Z=i(9135),b=i(4165),g=i(5861),C=i(9439),y=i(9924),N=i(9174),_=i(1413),D=i(1652),w=i(4560),S=i(4750),I=i(2869),T=i(8096),F=i(6989),M=i(829),A=i(9891),P=i(7198),z=i(7892),L=i.n(z),E=i(5705),K=function(e){var t=e.onClose,i=e.open,s=e.task,l=function(e,t){var i;return(0,E.TA)({initialValues:{title:e.title,status:e.status,priority:e.priority,startDate:e.startDate?L()(new Date(e.startDate)):null,deadline:e.deadline?L()(new Date(e.deadline)):null,description:null!==(i=e.description)&&void 0!==i?i:""},validate:function(e){var t={};return e.title.length||(t.title="Field is required"),t},onSubmit:function(e){var i,s,l={title:e.title,status:e.status,priority:e.priority,startDate:null===(i=e.startDate)||void 0===i?void 0:i.toISOString(),deadline:null===(s=e.deadline)||void 0===s?void 0:s.toISOString(),description:e.description};t(l)}})}(s,e.onSubmit),n=l.handleSubmit,a=l.getFieldProps,r=l.setFieldValue,d=l.touched,c=l.errors,m=!(!d.title||!c.title),p=m?c.title:"Task title";return(0,u.jsx)(h.u_,{onClose:t,open:i,title:s.title,children:(0,u.jsxs)("form",{className:"task-form",onSubmit:n,children:[(0,u.jsxs)("div",{className:"task-form__created",children:[(0,u.jsx)("span",{children:"Creted:"})," ",(0,u.jsx)("span",{children:new Date(s.addedDate).toLocaleString()})]}),(0,u.jsx)(F.Z,(0,_.Z)({label:p,error:m},a("title"))),(0,u.jsxs)("div",{className:"task-form__select-group select-group",children:[(0,u.jsxs)(T.Z,{className:"select-group__select select",children:[(0,u.jsx)(M.Z,{id:"demo-simple-select-label",className:"select__label",children:"Status"}),(0,u.jsxs)(P.Z,(0,_.Z)((0,_.Z)({labelId:"demo-simple-select-label",id:"demo-simple-select"},a("status")),{},{children:[(0,u.jsx)(A.Z,{value:0,children:"New"}),(0,u.jsx)(A.Z,{value:1,children:"In Progress"}),(0,u.jsx)(A.Z,{value:2,children:"Completed"}),(0,u.jsx)(A.Z,{value:3,children:"Draft"})]}))]}),(0,u.jsxs)(T.Z,{className:"select-group__select select",children:[(0,u.jsx)(M.Z,{id:"priority-select-label",className:"select__label",children:"Priority"}),(0,u.jsxs)(P.Z,(0,_.Z)((0,_.Z)({labelId:"priority-select-label",id:"priority-select"},a("priority")),{},{children:[(0,u.jsx)(A.Z,{value:0,children:"Low"}),(0,u.jsx)(A.Z,{value:1,children:"Middle"}),(0,u.jsx)(A.Z,{value:2,children:"Hight"}),(0,u.jsx)(A.Z,{value:3,children:"Urgently"}),(0,u.jsx)(A.Z,{value:4,children:"Later"})]}))]})]}),(0,u.jsx)(D._,{dateAdapter:S.y,children:(0,u.jsx)(w.C,{components:["DatePicker","DatePicker"],children:(0,u.jsxs)("div",{className:"task-form__dates dates",children:[(0,u.jsx)(I.M,(0,_.Z)((0,_.Z)({label:"Start date",className:"dates__start"},a("startDate")),{},{onChange:function(e){r("startDate",L()(new Date(e)))}})),(0,u.jsx)(I.M,(0,_.Z)((0,_.Z)({label:"Deadline",className:"dates__deadline"},a("deadline")),{},{onChange:function(e){r("deadline",L()(new Date(e)))}}))]})})}),(0,u.jsx)(F.Z,(0,_.Z)({label:"Description",multiline:!0},a("description"))),(0,u.jsxs)("div",{className:"task-form__buttons",children:[(0,u.jsx)(o.Z,{variant:"contained",color:"inherit",onClick:t,children:"Cancel"}),(0,u.jsx)(o.Z,{variant:"contained",type:"submit",children:"Apply"})]})]})})},O=i(56),V=(0,c.memo)((function(e){var t=e.task,i=e.todolistId,s=(0,d.T)(),n=(0,x.v9)(l(i)),a=(0,d.o)(r.KM),o=a.removeTask,m=a.updateTask,h=(0,c.useState)(!1),p=(0,C.Z)(h,2),v=p[0],j=p[1],k=n||t.loading,_=t.status===Z.Fm.Completed,D=function(){var e=(0,g.Z)((0,b.Z)().mark((function e(l){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({taskId:t.id,domainModel:l,todolistId:i}).unwrap();case 3:j(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,O.d2)(e.t0,s);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"task",children:[(0,u.jsx)(K,{open:v,onClose:function(){return j(!1)},task:t,onSubmit:D}),(0,u.jsx)(N.Z,{checked:_,color:"primary",onChange:function(e){var s=e.currentTarget.checked?Z.Fm.Completed:Z.Fm.New;m({taskId:t.id,domainModel:{status:s},todolistId:i})},disabled:k}),(0,u.jsxs)("div",{className:"task-with-icon",children:[(0,u.jsx)("p",{className:"editable-span",onClick:function(){return j(!0)},children:t.title}),(0,u.jsx)(f.Z,{onClick:function(){o({taskId:t.id,todolistId:i})},disabled:k,children:(0,u.jsx)(y.Z,{style:{opacity:"0.4"}})})]})]})})),$=function(e){var t=e.tasks,i=e.todolist,s=t;return"active"===i.filter&&(s=t.filter((function(e){return e.status===Z.Fm.New}))),"completed"===i.filter&&(s=t.filter((function(e){return e.status===Z.Fm.Completed}))),(0,u.jsx)("div",{className:"task-list",children:s.length?s.map((function(e){return(0,u.jsx)(V,{task:e,todolistId:i.id},e.id)})):(0,u.jsx)("p",{className:"no-task",children:"No tasks yet..."})})},q=function(){var e=(0,x.v9)(s),t=(0,d.o)(n.$f).fetchTodolists;return(0,c.useEffect)((function(){t()}),[]),(0,u.jsx)("div",{className:"lists-container",children:null===e||void 0===e?void 0:e.map((function(e){return(0,u.jsx)(k,{todolist:e},e.id)}))})}}}]);
//# sourceMappingURL=894.c774623f.chunk.js.map